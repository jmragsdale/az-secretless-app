<svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .box { fill: #fff; stroke: #000; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #000; }
      .title-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #000; }
      .header { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #000; }
      .line { stroke: #000; stroke-width: 2; fill: none; }
      .arrow { fill: #000; }
      .step-text { font-family: Arial, sans-serif; font-size: 11px; fill: #000; font-style: italic; }
    </style>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" class="arrow" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" class="header">Azure Secretless Application Architecture</text>
  <text x="500" y="55" text-anchor="middle" style="font-size: 14px; fill: #666;">Zero-Trust with Managed Identity and Key Vault</text>
  
  <!-- Azure App -->
  <rect x="100" y="150" width="250" height="180" class="box" rx="5"/>
  <text x="225" y="180" text-anchor="middle" class="title-text">Azure App Service</text>
  <text x="225" y="200" text-anchor="middle" style="font-size: 11px;">(Web App / Function App)</text>
  
  <!-- Managed Identity inside app -->
  <rect x="130" y="220" width="190" height="90" class="box" rx="3"/>
  <text x="225" y="245" text-anchor="middle" class="title-text">Managed Identity</text>
  <text x="225" y="265" text-anchor="middle" style="font-size: 10px;">System-Assigned or User-Assigned</text>
  <text x="225" y="285" text-anchor="middle" style="font-size: 10px;">✓ No credentials stored</text>
  <text x="225" y="300" text-anchor="middle" style="font-size: 10px;">✓ Automatic token generation</text>
  
  <!-- Azure AD -->
  <rect x="400" y="180" width="250" height="150" class="box" rx="5"/>
  <text x="525" y="210" text-anchor="middle" class="title-text">Azure Active Directory</text>
  <text x="525" y="230" text-anchor="middle" style="font-size: 11px;">(Identity Provider)</text>
  
  <text x="525" y="260" text-anchor="middle" style="font-size: 10px;">• Validates identity</text>
  <text x="525" y="280" text-anchor="middle" style="font-size: 10px;">• Issues OAuth 2.0 tokens</text>
  <text x="525" y="300" text-anchor="middle" style="font-size: 10px;">• No credentials required</text>
  <text x="525" y="320" text-anchor="middle" style="font-size: 10px;">• Automatic token refresh</text>
  
  <!-- Step 1: Request token -->
  <line x1="350" y1="230" x2="400" y2="230" class="line" marker-end="url(#arrowhead)"/>
  <text x="360" y="220" class="step-text">1. Request token</text>
  
  <!-- Step 2: Return token -->
  <line x1="400" y1="270" x2="350" y2="270" class="line" marker-end="url(#arrowhead)"/>
  <text x="360" y="285" class="step-text">2. Return token</text>
  
  <!-- Azure Key Vault -->
  <rect x="680" y="180" width="300" height="150" class="box" rx="5"/>
  <text x="830" y="210" text-anchor="middle" class="title-text">Azure Key Vault</text>
  <text x="830" y="230" text-anchor="middle" style="font-size: 11px;">Centralized Secret Management</text>
  
  <!-- Secrets inside Key Vault -->
  <text x="830" y="260" text-anchor="middle" style="font-size: 11px; font-weight: bold;">Secrets Stored:</text>
  <text x="830" y="280" text-anchor="middle" style="font-size: 10px;">• Database passwords • API keys</text>
  <text x="830" y="295" text-anchor="middle" style="font-size: 10px;">• Connection strings • Certificates</text>
  <text x="830" y="310" text-anchor="middle" style="font-size: 10px;">• Storage account keys</text>
  
  <!-- Step 3: Access Key Vault with token -->
  <line x1="350" y1="240" x2="680" y2="240" class="line" marker-end="url(#arrowhead)"/>
  <text x="480" y="230" class="step-text">3. Access Key Vault with token</text>
  
  <!-- Step 4: Return secrets -->
  <line x1="680" y1="260" x2="350" y2="260" class="line" marker-end="url(#arrowhead)"/>
  <text x="480" y="275" class="step-text">4. Return secrets at runtime</text>
  
  <!-- Key Features Box -->
  <rect x="100" y="370" width="880" height="100" class="box" rx="5"/>
  <text x="540" y="395" text-anchor="middle" class="title-text">Zero-Trust Security Features</text>
  
  <text x="120" y="420" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">No Hardcoded Secrets:</tspan> No credentials in code or config files</text>
  <text x="120" y="440" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Automatic Rotation:</tspan> Secrets rotated without application changes</text>
  <text x="120" y="460" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Token-Based Access:</tspan> OAuth 2.0 tokens eliminate credential theft risk</text>
  
  <text x="550" y="420" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Identity-Based Auth:</tspan> Azure AD authentication without secrets</text>
  <text x="550" y="440" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Audit Trail:</tspan> Complete access logging for compliance</text>
  <text x="550" y="460" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">SOC 2 Compliant:</tspan> Centralized secret management</text>
  
  <!-- Comparison Table -->
  <rect x="100" y="500" width="880" height="140" class="box" rx="5"/>
  <text x="540" y="525" text-anchor="middle" class="title-text">Traditional vs Secretless Approach</text>
  
  <!-- Table headers -->
  <line x1="540" y1="535" x2="540" y2="630" class="line"/>
  <text x="320" y="550" text-anchor="middle" style="font-size: 12px; font-weight: bold;">❌ Traditional Approach</text>
  <text x="760" y="550" text-anchor="middle" style="font-size: 12px; font-weight: bold;">✅ Secretless Approach</text>
  
  <line x1="120" y1="560" x2="960" y2="560" class="line"/>
  
  <text x="130" y="580" class="text" style="font-size: 11px;">Secrets hardcoded in code</text>
  <text x="560" y="580" class="text" style="font-size: 11px;">No secrets in code</text>
  
  <text x="130" y="600" class="text" style="font-size: 11px;">Connection strings in config files</text>
  <text x="560" y="600" class="text" style="font-size: 11px;">Retrieved at runtime from Key Vault</text>
  
  <text x="130" y="620" class="text" style="font-size: 11px;">Credentials in environment variables</text>
  <text x="560" y="620" class="text" style="font-size: 11px;">Managed Identity tokens</text>
</svg>